rails new posts


rails g controller posts
rails g model Post title:string body:text
rails db:migrate

routes.rb

                                Rails.application.routes.draw do
                                  resources :posts
                                  root "posts#index"
                                end
posts_controller.rb

                                  class PostsController < ApplicationController

                                    def index
                                    end

                                    def new
                                    end

                                    def create
                                      @post = Post.new(post_params)
                                      @post.save

                                      redirect_to @post
                                    end

                                    def show
                                      @post = Post.find(params[:id])
                                    end

                                    private

                                    def post_params
                                      params.require(:post).permit(:title, :body)
                                    end

                                  end

  create  new.html.erb

                                    <h1> Make something </h1>

                                    <%= form_for :post, url: posts_path do |f| %>
                                      <p>
                                        <%= f.label :title %><br>
                                        <%= f.text_field :title %>
                                      </p>

                                      <p>
                                        <%= f.label :body %><br>
                                        <%= f.text_area :body %>
                                      </p>

                                      <p>
                                        <%= f.submit %><br>
                                      </p>

                                      <%end%>

index.html.erb

                                    <h1 class= "title">
                                      <%= @post.title %>
                                    </h1>

                                    <p class="date">
                                      Submitted <%= time_ago_in_words(@post.created_at) %> ago
                                    </p>

                                    <p class="body">
                                      <%= @post.body %>
                                    </p>

2. modify PostsController

                            class PostsController < ApplicationController

                              def index
                                @posts = Post.all.order('created_at DESC')
                              end

                              def new
                              end

                              def create
                                @post = Post.new(post_params)
                                @post.save

                                redirect_to @post
                              end

                              def show
                                @post = Post.find(params[:id])
                              end

                              private

                              def post_params
                                params.require(:post).permit(:title, :body)
                              end

                            end

    modify index.html.erb

                            <% @posts.each do |post| %>
                              <div class= "post_wrapper">
                                <h2 class="title"><%= link_to post.title, post %></h2>
                                <p class= "date"><%= time_ago_in_words(post.created_at) %>ago</p>
                              </div>
                              <%end%>

  3. CHANGE GIT BRANCH  (styling and structure)

  git checkout -b styling    <= styling is the name of the branch u wanna create,, it can be any name
  git branch    <= to check which branch ure at

  4. add this at model/post.rb

                            class Post < ApplicationRecord
                              validates :title, presence: true, length: {minimum: 5}
                              validates :body, presence: true
                            end

    modify posts_controller.rb

                              class PostsController < ApplicationController

                                def index
                                  @posts = Post.all.order('created_at DESC')
                                end

                                def new
                                  @post = Post.new
                                end

                                def create
                                  @post = Post.new(post_params)
                                  if @post.save
                                    redirect_to @post
                                  else
                                    render 'new'
                                  end
                                end

                                def show
                                  @post = Post.find(params[:id])
                                end

                                private

                                def post_params
                                  params.require(:post).permit(:title, :body)
                                end

                              end

  modify new.html.erb

                              <div id= "page_wrapper">
                              <h1> Make Something </h1>

                              <%= form_for :post, url: posts_path do |f| %>
                              <% if @post.errors.any? %>
                                <div id= "errors">
                                  <h2><%= pluralize(@post.errors.count, "error") %> stopped this post from saving </h2>
                                    <ul>
                                        <% @post.errors.full_messages.each do |msg| %>
                                        <li> <%= msg %> </li>
                                        <%end%>
                                    </ul>
                                </div>

                                <%end%>
                                <p>
                                  <%= f.label :title %><br>
                                  <%= f.text_field :title %>
                                </p>

                                <p>
                                  <%= f.label :body %><br>
                                  <%= f.text_area :body %>
                                </p>

                                <p>
                                  <%= f.submit %><br>
                                </p>

                                <%end%>
                              </div>

  5. add edit and destroy

                            class PostsController < ApplicationController

                              def index
                                @posts = Post.all.order('created_at DESC')
                              end

                              def new
                                @post = Post.new
                              end

                              def create
                                @post = Post.new(post_params)
                                if @post.save
                                  redirect_to @post
                                else
                                  render 'new'
                                end
                              end

                              def show
                                @post = Post.find(params[:id])
                              end

                              def edit
                                @post = Post.find(params[:id])
                              end

                              def update
                                @post = Post.find(params[:id])
                                if @post.update(params[:post].permit(:title, :body))
                                  redirect_to @post
                                else
                                  render 'edit'
                                end
                              end

                              def destroy
                                @post = Post.find(params[:id])
                                @post.destroy

                                redirect_to root_path

                              end

                              private

                              def post_params
                                params.require(:post).permit(:title, :body)
                              end

                            end


     modify show.html.erb

                           <div id="post_content">
                             <h1 class= "title">
                               <%= @post.title %>
                             </h1>

                             <p class="date">
                               Submitted <%= time_ago_in_words(@post.created_at) %> ago
                               <%= link_to 'Edit', edit_post_path(@post) %>
                               <%= link_to 'Delete', post_path(@post), method: :delete, data: {confirm: 'Are you sure?'} %>

                             </p>

                             <p class="body">
                               <%= @post.body %>
                             </p>
                           </div>
                                  
